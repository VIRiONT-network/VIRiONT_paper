Bootstrap: docker
From: continuumio/miniconda3:4.12.0
Stage: condabuild

%files
VIRiONT.yml /VIRiONT.yml

%post
/opt/conda/bin/conda env create -f /VIRiONT.yml #&& \

Bootstrap: docker
From: centos:7
Stage: final

%files from condabuild
/opt/conda/envs/VIRiONT /opt/conda/envs/VIRiONT

%environment
export PATH=/opt/conda/envs/VIRiONT/bin:/opt/sra-human-scrubber/scripts/:$PATH
export JAVA_HOME=/opt/conda/envs/VIRiONT

%post
yum update -y
yum groupinstall -y @"Development Tools"
yum install -y epel-release centos-release-scl
yum update -y
yum install -y git curl wget which nano htop bc tar bzip2 gzip lz4 lzma libcurl-devel libxml2-devel libgit2-devel openssl-devel harfbuzz-devel fribidi-devel libtiff-devel 

export PATH=/opt/conda/envs/VIRiONT/bin:$PATH
cd /opt/


%help
    SUMMARY
    Container with tools necessary for the long-read nextflow pipeline seqmet.
    KNOWN BUGS
    None
    USAGE
    Called by the variant-calling nextflow pipeline seqmet.

%labels
    Version 0.1.0
    Author HadrienRegue
    Date 2024-02-20
